{"version":3,"sources":["assets/script/tool/playroomData.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { gc } from \"./gameControl\";\nimport { stockpileUtils } from \"./stockpileUtils\";\n\nlet onCloseFinishCb: () => void = null;\nlet onClosefailCb: () => void = null;\nclass playroomData {\n\n    private static _instance: playroomData = null;\n\n    public static getInstance(): playroomData {\n        if (this._instance == null) {\n            this._instance = new playroomData();\n        }\n        return this._instance;\n    }\n\n\n    constructor() {\n        cc.game.on(cc.game.EVENT_HIDE, function () {\n            this.storageData();\n        }, this);\n    }\n\n    privacyPolicyUrl: string = \"https://sites.google.com/view/gorgeousfind-differencesprivac/%E9%A6%96%E9%A1%B5\";\n    termsofServiceUrl: string = \"https://sites.google.com/view/gorgeousfind-differencestermso/%E9%A6%96%E9%A1%B5\";\n\n    levelAll: number = 30;\n    userData: any = {\n        isClause: false,    //是否打开过隐私协议    \n        tishiNum: 1,        //提示次数\n        level: 1,           //当前关卡\n        isHall: false,      //是否返回过大厅\n        isGudie: false,      //是否打开过新手引导\n        finishLevel5: false,  //是否完成过第5关\n    };\n\n    storageData() {\n        stockpileUtils.setStorageJSON(storage.gamedata, this.userData);\n    }\n\n\n    setVideoFailCb(cb: () => void) {\n        // onClosefailCb = null;\n        // onClosefailCb = cb;\n\n        window['onClosefailCb'] = null;\n        window['onClosefailCb']  = cb;\n    }\n\n    //看广告\n    showVideo(finishCb: () => void) {\n        console.log(\"android------------看广告\")\n        if (cc.sys.isNative && cc.sys.OS_ANDROID == cc.sys.os) {\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"showShiPing\", \"()V\");\n            onCloseFinishCb = null;\n            onCloseFinishCb = finishCb;\n        } else if (cc.sys.isNative && cc.sys.OS_IOS == cc.sys.os) {\n            window['onCloseFinishCb'] = null;\n            window['onCloseFinishCb']= finishCb;\n        } else {\n            finishCb();\n        }\n\n    }\n\n    //打开banner\n    showBanner() {\n        if (cc.sys.isNative && cc.sys.OS_ANDROID == cc.sys.os) {\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"showbanner\", \"()V\");\n        }\n    }\n\n    //关闭banner\n    closeBanner() {\n        if (cc.sys.isNative && cc.sys.OS_ANDROID == cc.sys.os) {\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"hidebanner\", \"()V\");\n        }\n    }\n\n    //打开插屏\n    showInterst() {\n        if (cc.sys.isNative && cc.sys.OS_ANDROID == cc.sys.os) {\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"showChaping\", \"()V\");\n        }\n    }\n\n    //打开评分\n    showPingFen() {\n        if (cc.sys.isNative && cc.sys.OS_ANDROID == cc.sys.os) {\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"openPingFen\", \"()V\");\n        }\n    }\n\n    //打开url\n    openUrl() {\n        if (cc.sys.isNative && cc.sys.OS_ANDROID == cc.sys.os) {\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"openUrl\", \"()V\");\n        }\n    }\n\n\n    \n    setGamestop(func: Function) {\n        window['gamestop'] = func;\n    }\n\n    setGamerecovery(func: Function) {\n        window['gamerecovery'] = func;\n    }\n\n\n    opentoast(str: string) {\n        cc.resources.load(\"prefeb/toast\", cc.Prefab, (err, prefab) => {\n            if (err) {\n                return;\n            }\n            let toast = cc.instantiate(prefab);\n            gc.resLoading.bindResAsset(toast, prefab);\n            let parentNode = gc.getsceneNode();\n            if (toast && parentNode) {\n                toast.active = true;\n                parentNode.addChild(toast);\n                let toastLabel = toast.getChildByName(\"label\");\n                toastLabel.getComponent(cc.Label).string = str;\n                cc.Tween.stopAllByTarget(toast);\n                toast.opacity = 255;\n                cc.tween(toast).to(0.15, { scale: 1.2 }).to(0.15, { scale: 1 }).delay(0.5).to(0.5, { opacity: 0 }).call(() => {\n                    toast.destroy();\n                }).start();\n            }\n        })\n    }\n  \n}\n\nexport let playroom = playroomData.getInstance();\n\nexport enum storage {\n    gamedata = \"gamedata\",\n}\n\nexport enum sound {\n    bgm = \"bgm\",\n    click = \"click\",\n    correct = \"correct\",\n    err = \"err\",\n    fail = \"fail\",\n    win = \"win\",\n}\n\n \nwindow['onCloseFinishCb'] = () => {\n   \n}\n\n/**sdk调用js里面window公众的函数 */\nwindow['onCloseVdieoFinishCb'] = () => {\n    // if (isPlayMusic) {\n    //     AudioCtr.bg();\n    // }\n    window['onCloseFinishCb']()\n}\n\n\n/**sdk调用js里面window公众的函数 */\nwindow['onCloseVdieofailCb'] = () => {\n    // if (isPlayMusic) {\n    //     AudioCtr.bg();\n    // }\n    window['onClosefailCb']()\n}\n\nwindow['onClosefailCb'] = () => {\n   \n}\n\n\n//游戏暂停\nwindow['gamestop'] = () => {\n\n}\n\n\n//游戏恢复\nwindow['gamerecovery'] = () => {\n\n}"]}