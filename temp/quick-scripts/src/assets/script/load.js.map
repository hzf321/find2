{"version":3,"sources":["assets/script/load.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { gc, pop, scene } from \"./tool/gameControl\";\nimport { playroom, storage } from \"./tool/playroomData\";\n \nimport { stockpileUtils } from \"./tool/stockpileUtils\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class load extends cc.Component {\n\n    @property(cc.Node)\n    loading_bg: cc.Node = null;\n\n    @property(cc.Sprite)\n    loaging_bar_yellow: cc.Sprite = null;\n\n    @property(cc.Node)\n    loadingBox: cc.Node = null;\n\n    @property(cc.Node)\n    gotoHallBox: cc.Node = null;\n\n    @property(cc.Node)\n    loading_play: cc.Node = null;\n\n    private resNum = 6;\n    private nowNum = 0;\n\n    start() {\n\n        if (cc.sys.platform === cc.sys.IPAD) {\n            this.getComponent(cc.Canvas).fitHeight = true;\n            this.getComponent(cc.Canvas).fitWidth = false;\n        }\n\n\n        gc.adapterBg(this.loading_bg);\n        gc.voiceUtils.initBtnClickEffect();\n        gc.voiceUtils.initbgmMusic();\n\n        let playroomStorage = stockpileUtils.getStorageJSON(storage.gamedata);\n        if (playroomStorage) {\n            playroom.userData = playroomStorage;\n        }\n\n        gc.setsceneNode(this.node);\n\n\n        if (!playroom.userData.isClause) {\n            this.gotoHallBox.active = false;\n            this.loadingBox.active = false;\n            gc.resLoading.showDialog(pop.termPop, {\n                callback: () => {\n                    playroom.userData.isClause = true;\n                    this.gotoHallBox.active = true;\n                    this.loadingBox.active = false;\n                    playroom.storageData();\n                    cc.tween(this.loading_play).to(0.5, { scale: 1.1 }).to(0.5, { scale: 1 }).union().repeatForever().start();\n                }\n            });\n        } else {\n            this.gotoHallBox.active = true;\n            this.loadingBox.active = false;\n\n            cc.tween(this.loading_play).to(0.5, { scale: 1.1 }).to(0.5, { scale: 1 }).union().repeatForever().start();\n        }\n\n\n\n        playroom.setVideoFailCb(()=>{\n            cc.resources.load(\"prefeb/toast\", cc.Prefab, (err, prefab) => {\n                if (err) {\n                    return;\n                }\n                let toast = cc.instantiate(prefab);\n                gc.resLoading.bindResAsset(toast, prefab);\n                let parentNode = gc.getsceneNode();\n                if (toast && parentNode) {\n                    toast.active = true;\n                    parentNode.addChild(toast);\n                    let toastLabel = toast.getChildByName(\"label\");\n                    toastLabel.getComponent(cc.Label).string = \"No ads at the moment\";\n                    cc.Tween.stopAllByTarget(toast);\n                    toast.opacity = 255;\n                    cc.tween(toast).to(0.15, { scale: 1.2 }).to(0.15, { scale: 1 }).delay(0.5).to(0.5, { opacity: 0 }).call(() => {\n                        toast.destroy();\n                    }).start();\n                }\n            })\n        });\n \n\n    }\n\n    onClick_gotoPlay() {\n        this.gotoHallBox.active = false;\n        this.loadingBox.active = true;\n        gc.voiceUtils.commonBtnClick();\n\n        this.loaging_bar_yellow.fillRange = 0;\n        cc.Tween.stopAllByTarget(this.loaging_bar_yellow)\n        cc.loader.loadResDir(\"prefeb\", (err, assets) => {\n            if (err) {\n                cc.error(err);\n                return;\n            }\n            console.log('prefeb assets in  have been loaded.');\n            this.progressBarEvent();\n        });\n        cc.loader.loadResDir(\"finishImg\", (err, assets) => {\n            if (err) {\n                cc.error(err);\n                return;\n            }\n            console.log('finishImg assets in  have been loaded.');\n            this.progressBarEvent();\n        });\n        cc.loader.loadResDir(\"originalImg\", (err, assets) => {\n            if (err) {\n                cc.error(err);\n                return;\n            }\n            console.log('originalImg assets in  have been loaded.');\n            this.progressBarEvent();\n        });\n        cc.loader.loadResDir(\"imgJson\", (err, assets) => {\n            if (err) {\n                cc.error(err);\n                return;\n            }\n            playroom.levelAll = assets.length;\n            console.log('imgJson assets in  have been loaded.');\n            this.progressBarEvent();\n        });\n\n        cc.director.preloadScene(scene.main, (err, assets) => {\n            cc.log(\"game scene preloaded\");\n            this.progressBarEvent();\n        });\n        cc.director.preloadScene(scene.sala, (err, assets) => {\n            cc.log(\"hall scene preloaded\");\n            this.progressBarEvent();\n        });\n\n    }\n\n    progressBarEvent() {\n        let fill = 1 / 6;\n        this.nowNum++;\n        cc.Tween.stopAllByTarget(this.loaging_bar_yellow)\n        cc.tween(this.loaging_bar_yellow).to(0.5, { fillRange: fill * this.nowNum })\n            .call(() => {\n                if (this.nowNum == this.resNum) {\n                    this.scheduleOnce(() => {\n                        if (playroom.userData.isHall) {\n                            cc.director.loadScene(scene.sala);\n                        } else {\n                            gc.imgId = playroom.userData.level;\n                            cc.director.loadScene(scene.main);\n                        }\n                    }, 0.05)\n                }\n            }).start();\n    }\n\n\n    showShiPing() {\n        console.log(\"android---------------showShiPing------------------\")\n        playroom.showVideo(()=>{\n            console.log(\"zzzzzzzzzzzzzzzzzzzzwwwwwwwwwwwwwwwwwwwwwwwwwwwww\");\n          })\n    }\n\n\n    showbanner() {\n        console.log(\"android---------------showbanner------------------\")\n        jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"showbanner\", \"()V\");\n    }\n\n\n    hidebanner() {\n        console.log(\"android---------------hidebanner------------------\")\n        jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"hidebanner\", \"()V\");\n    }\n \n    showChaping() {\n        console.log(\"android---------------showChaping------------------\")\n        jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"showChaping\", \"()V\");\n    }\n   \n    testBtn() {\n        console.log(\"android---------------testBtn------------------\")\n        jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"openPingFen\", \"()V\");\n    }\n}\n"]}